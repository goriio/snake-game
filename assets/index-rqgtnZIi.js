(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();class l{title;description;actions;overlay;dialog;static active;constructor(t,e,i){this.title=t,this.description=e,this.actions=i,this.overlay=document.createElement("div"),this.dialog=document.createElement("div"),this.build()}build(){this.overlay.className="dialog-overlay",this.dialog.className="dialog";const t=document.createElement("h2");t.textContent=this.title,this.dialog.appendChild(t);const e=document.createElement("p");e.textContent=this.description,this.dialog.appendChild(e);const i=document.createElement("div");i.className="dialog-buttons-container",this.actions.forEach(s=>{const o=document.createElement("button");o.className="dialog-button",o.textContent=s.label,o.addEventListener("click",s.onClick),i.appendChild(o)}),this.dialog.appendChild(i),this.overlay.appendChild(this.dialog)}show(){l.active?.close(),l.active=this,document.body.appendChild(this.overlay)}close(){this.overlay.remove()}}class n{x;y;constructor(t,e){this.x=t,this.y=e}}class a{position;gridSize;constructor(t){this.gridSize=t,this.position=this.randomPosition()}randomPosition(){return new n(Math.floor(Math.random()*this.gridSize),Math.floor(Math.random()*this.gridSize))}respawn(t){let e;do e=this.randomPosition();while(t.body.some(i=>i.x===e.x&&i.y===e.y));this.position=e}}class d{element;current=0;constructor(){this.element=document.querySelector(".score")}increase(){this.current++}render(){this.element.innerHTML=`üçé Score: ${this.current}`}}class h{body=[];direction=new n(1,0);constructor(t={x:10,y:10},e=2){for(let i=0;i<e;i++)this.body.push(new n(t.x-i,t.y))}move(){const t=this.body[0],e=new n(t.x+this.direction.x,t.y+this.direction.y);this.body.unshift(e),this.body.pop()}grow(){const t=this.body[this.body.length-1];this.body.push(t)}setDirection(t){(this.direction.x+t.x!==0||this.direction.y+t.y!==0)&&(this.direction=t)}isCollidingWithSelf(){const[t,...e]=this.body;return e.some(i=>i.x===t.x&&i.y===t.y)}isCollidingWithWall(t){const e=this.body[0];return e.x<0||e.y<0||e.x>t-1||e.y>t-1}isCollidingWithFood(t){const e=this.body[0];return e.x===t.position.x&&e.y===t.position.y}}class u{context;gridSize=20;tileSize=20;intervalId;snake=new h;food=new a(this.gridSize);score=new d;constructor(t){this.context=t.getContext("2d"),window.addEventListener("keydown",i=>this.handleInput(i));const e=new l("The Classic Snake Game üêç","Click start to play.",[{label:"Start",onClick:()=>{this.start(),e.close()}}]);e.show()}start(){this.intervalId=setInterval(()=>this.update(),100)}stop(){clearInterval(this.intervalId)}reset(){this.snake=new h,this.food=new a(this.gridSize),this.score=new d}handleInput(t){const e={ArrowUp:new n(0,-1),ArrowDown:new n(0,1),ArrowRight:new n(1,0),ArrowLeft:new n(-1,0)};e[t.key]&&this.snake.setDirection(e[t.key])}update(){this.snake.move(),this.checkCollisions(),this.draw()}checkCollisions(){if(this.snake.isCollidingWithSelf()||this.snake.isCollidingWithWall(this.gridSize)){this.stop();const t=new l("Game is over ü•π",`You scored ${this.score.current}.`,[{label:"Play again",onClick:()=>{this.reset(),this.start(),t.close()}}]);t.show()}this.snake.isCollidingWithFood(this.food)&&(this.snake.grow(),this.food.respawn(this.snake),this.score.increase())}draw(){this.context.clearRect(0,0,400,400),this.context.fillStyle="#0add51";for(const t of this.snake.body)this.context.fillRect(t.x*this.tileSize,t.y*this.tileSize,this.tileSize,this.tileSize);this.context.fillStyle="#dd230a",this.context.fillRect(this.food.position.x*this.tileSize,this.food.position.y*this.tileSize,this.tileSize,this.tileSize),this.score.render()}}const y=document.querySelector("#canvas");new u(y);
